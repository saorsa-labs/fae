# Consensus Review Report — Phase 1.1: FFI Surface
**Date:** 2026-02-18
**Phase:** 1.1 — C ABI Boundary for Embedded Rust Core
**Iteration:** 1

## Build Status
```
cargo check --no-default-features --all-targets  → CLEAN ✓
cargo clippy --no-default-features -- -D warnings → ZERO WARNINGS ✓
cargo fmt --all -- --check                        → CLEAN ✓
cargo nextest run --no-default-features           → 2127/2127 PASS ✓
```

## Voting Tally

### FINDING F-1: `#[allow(dead_code)]` on `log_level` field (src/ffi.rs:48)
| Reviewer | Vote |
|----------|------|
| Error Handling Hunter | SHOULD FIX |
| Code Quality | MUST FIX |
| Quality Patterns | MUST FIX |
| Code Simplifier | MUST FIX |
| Codex | SHOULD FIX |
| Kimi | MUST FIX |
| GLM | MUST FIX |
| MiniMax | MUST FIX |
**Consensus: MUST FIX (8/8 votes, 6 MUST FIX)**
**Action:** Remove `log_level` field OR rename to `_log_level` to avoid `#[allow(dead_code)]`

---

### FINDING F-2: `FaeEventCallback` alias not used in `fae_core_set_event_callback` parameter
| Reviewer | Vote |
|----------|------|
| Code Quality | SHOULD FIX |
| Type Safety | MUST FIX |
| Quality Patterns | SHOULD FIX |
| Code Simplifier | SHOULD FIX |
| Codex | SHOULD FIX |
| Kimi | SHOULD FIX |
| GLM | SHOULD FIX |
| MiniMax | SHOULD FIX |
**Consensus: MUST FIX (8/8 votes, 1 MUST FIX)**
**Action:** Change parameter to `callback: Option<FaeEventCallback>`

---

### FINDING F-3: Missing test for double-start returning -1
| Reviewer | Vote |
|----------|------|
| Test Coverage | SHOULD FIX |
| Codex | SHOULD FIX |
| Kimi | SHOULD FIX |
| GLM | SHOULD FIX |
**Consensus: SHOULD FIX (4/15 voters flagged)**
**Action:** Add `ffi_abi_double_start_returns_error` test

---

### FINDING F-4: Re-entrancy warning not in Rust doc comment
| Reviewer | Vote |
|----------|------|
| Documentation | SHOULD FIX |
| MiniMax | SHOULD FIX |
**Consensus: SHOULD FIX (2/15 voters)**
**Action:** Add re-entrancy warning to `fae_core_set_event_callback` doc comment

---

### FINDING F-5: Missing test for send_command before start
| Reviewer | Vote |
|----------|------|
| Test Coverage | SHOULD FIX |
| GLM | SHOULD FIX |
**Consensus: SHOULD FIX (2/15 voters)**
**Action:** Add test or document behavior (may be documented as UB)

---

### INFORMATION ITEMS (no fix required, document only)
- F-6: TOCTOU in fae_core_start — practical safety via server.take() (COMP-3, Codex)
- F-7: drain_events + poll_event competing for same Receiver — document mutual exclusion (MiniMax)
- F-8: Double-free risk documentation — inherent to C ABI, document more prominently (SEC-1)
- F-9: ABI version constant — forward-looking, Phase 1.3 concern (GLM)

---

## Verdict

**VERDICT: CONDITIONAL PASS**

Two MUST FIX items identified. All other findings are SHOULD FIX or informational. Build is clean. Tests all pass.

**Required before merge:**
1. MUST FIX F-1: Remove or rename `log_level` field to eliminate `#[allow(dead_code)]`
2. MUST FIX F-2: Use `FaeEventCallback` alias in `fae_core_set_event_callback` parameter

**Recommended before merge:**
3. SHOULD FIX F-3: Add double-start test
4. SHOULD FIX F-4: Add re-entrancy warning to Rust doc

**Phase 1.1 Assessment:**
- Core deliverables: COMPLETE
- Quality gates: PASSING
- Policy compliance: REQUIRES 2 FIXES
- Test coverage: GOOD (6 ABI tests + 7 channel integration tests + 6 unit tests)

**External Reviewer Grades:**
- Codex: A-
- Kimi K2: A-
- GLM-4: B+
- MiniMax: A-
**Average: A-**
