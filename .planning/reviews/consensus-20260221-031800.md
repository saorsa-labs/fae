# GSD Review Consensus Report
**Date**: 2026-02-21T03:18:00Z
**Phase**: 7.5 — Backup, Recovery & Hardening
**Iteration**: 1
**Reviewers**: 15 (13 internal/external agents, 2 tool-unavailable with fallback)
**Build**: PASS (2234/2234 tests, 0 clippy warnings, 0 fmt issues)

---

## Vote Tally — All Findings

### Finding 1: VACUUM INTO path SQL escaping (backup.rs:52)
**Votes**: security.md [MEDIUM], kimi.md [MEDIUM], glm.md [MEDIUM], codex.md [LOW], minimax.md [MEDIUM]
**Consensus**: MEDIUM — 4+ votes at MEDIUM or above
**Description**: `replace('\'', "''")` for VACUUM INTO path. VACUUM INTO does not support parameterized binding. Path is internally generated (not user input), so practical risk is low, but pattern is fragile.
**Action**: SHOULD FIX — Add comment documenting why SQL escaping is used and that path is internally generated. Consider using Utc timestamp instead of Local (reduces character set variance). Alternatively, add a path validation assertion.

---

### Finding 2: backup_keep_count reads from MemoryConfig::default() not runtime config (tasks.rs:860)
**Votes**: code-quality.md [LOW], codex.md [LOW], quality-patterns.md [LOW], minimax.md [LOW], glm.md [LOW]
**Consensus**: LOW — 5 votes, no MEDIUM or above
**Description**: `crate::config::MemoryConfig::default().backup_keep_count` always returns 7 regardless of user configuration. The user's actual backup_keep_count config is ignored at runtime.
**Action**: SHOULD FIX — Should read from runtime config (passed via context or env) rather than constructing a default. Pattern is inconsistent with how retention_days is handled (passed as a parameter to execute_builtin_with_memory_root).

---

### Finding 3: chrono::Local::now() for backup timestamps (backup.rs:44)
**Votes**: security.md [LOW], kimi.md [LOW], type-safety.md [LOW], code-quality.md [LOW], glm.md [LOW], minimax.md [LOW]
**Consensus**: LOW — 6 votes at LOW
**Description**: Using Local time for backup filenames may cause DST ambiguity. UTC preferred for deterministic chronological ordering.
**Action**: OPTIONAL — Low risk (backup dir is local, sorting by filename works in practice). Consider switching to Utc::now() for robustness.

---

### Finding 4: entry.ok()? silently drops directory entry errors (backup.rs:83)
**Votes**: kimi.md [MEDIUM], error-handling.md [LOW]
**Consensus**: LOW — only 1 MEDIUM vote (Kimi), 1 LOW vote
**Description**: In rotate_backups, `entry.ok()?` in filter_map drops read_dir entry errors without logging. Permissions errors would be silently ignored.
**Action**: INFORMATIONAL — This is acceptable per project "quiet operation" policy. The read_dir error (outer) is still propagated. Entry-level errors are rare and non-fatal.

---

### Finding 5: ensure_sqlite_vec_loaded() return value ignored (backup.rs:53)
**Votes**: kimi.md [MEDIUM]
**Consensus**: LOW — only 1 vote (Kimi only)
**Description**: Kimi flagged that ensure_sqlite_vec_loaded() is silently ignored if initialization fails.
**Rebuttal**: ensure_sqlite_vec_loaded() is a void function (returns `()`); it uses a `Once` and calls `sqlite3_auto_extension` which is registered globally and cannot fail in a recoverable way at this stage. Kimi's finding is inaccurate — the function has no return value to check.
**Action**: NO ACTION — Finding is factually incorrect about the function signature.

---

### Finding 6: IO error to string conversion (backup.rs:39, 64)
**Votes**: kimi.md [LOW], error-handling.md [LOW], quality-patterns.md [LOW]
**Consensus**: LOW — 3 votes at LOW
**Description**: `e.to_string()` loses error kind for downstream inspection.
**Action**: INFORMATIONAL — SqliteMemoryError::Io(String) is the existing pattern in the codebase. Adding an IoError(std::io::Error) variant would require a rethink of the error type. Not worth changing now.

---

### Finding 7: No unit test for TASK_MEMORY_BACKUP dispatch (tasks.rs)
**Votes**: test-coverage.md [LOW], codex.md [LOW]
**Consensus**: LOW — 2 votes at LOW
**Description**: execute_builtin_with_memory_root test only exercises TASK_MEMORY_GC dispatch. No parallel test for TASK_MEMORY_BACKUP.
**Action**: INFORMATIONAL — The pattern is consistent with other tasks (reflect, reindex, migrate also lack individual dispatch tests). The backup logic is covered by backup.rs tests. Not a new gap introduced by phase 7.5.

---

## Grades Summary

| Reviewer | Grade |
|----------|-------|
| Error Handling Hunter | A- |
| Security Scanner | A- |
| Code Quality | A- |
| Documentation | A |
| Test Coverage | A- |
| Type Safety | A |
| Complexity | A |
| Build Validator | A |
| Task Assessor | A- |
| Quality Patterns | A- |
| Codex (OpenAI) | B+ |
| Kimi K2 | B |
| GLM-4.7 | N/A |
| MiniMax | N/A |
| Code Simplifier | A |

**Overall Consensus Grade: A-**

---

## MUST FIX (CRITICAL/HIGH consensus, 2+ votes)
None.

## SHOULD FIX (MEDIUM consensus, 2+ votes)
1. **VACUUM INTO path comment** (backup.rs:52) — 4 MEDIUM votes. Add safety comment documenting that path is internally generated and single-quote escaping is the only option since VACUUM INTO does not support parameterized binding.

## COULD FIX (LOW, 3+ votes)
2. **backup_keep_count from runtime config** (tasks.rs:860) — 5 LOW votes. Should be read from runtime config, not MemoryConfig::default().
3. **chrono::Local -> Utc** (backup.rs:44) — 6 LOW votes. Use Utc::now() for deterministic filename ordering.

## EXIT CONDITIONS
- Zero CRITICAL findings: YES
- Zero HIGH findings: YES
- Build passes: YES (cargo check, clippy, nextest, fmt all pass)
- External grades B or higher: YES (Kimi: B, Codex: B+)

**VERDICT: PASSED**

Phase 7.5 review passes. One SHOULD FIX (documentation-level comment on SQL escaping) and two COULD FIX (config wiring, UTC timestamps). No blocking issues.
